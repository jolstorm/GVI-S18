<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Day06FormValidations</title>
    <link rel="stylesheet" href="./fv.css" />
  </head>
  <body>
    <form action="#" name="form1" onsubmit="return validate()">
      <label for="email">Email Id:</label><br />
      <input
        type="text"
        id="email"
        name="email"
        placeholder="example:abc@xyz.com"
      /><br /><br />
      <label for="mobile_number">Phone number</label><br />
      <input
        type="text"
        id="mobile_number"
        name="mobile_number"
        placeholder="eg.7897817989"
      /><br /><br />
      <label for="password">Password</label><br />
      <input type="password" id="password" name="password" /><br /><br />
      <input type="submit" /><br /><br />

      <label for="sports_cars">Cars</label><br />
      <select id="sports_cars" name="sports_cars">
        <br /><br />
        <option value="none" selected disabled hidden>Select a car</option>
        <option value="Lambo">Lambo</option>
        <option value="Ferrari">Ferrari</option>
        <option value="McLaren">McLaren</option>
        <option value="Aston_Martin">Aston Martin</option></select
      ><br />

      <p>Select your favourite character</p>
      <input
        type="radio"
        id="Hansolo"
        value="Hansolo"
        name="characters"
        checked
      />
      <label for="Hansolo">Han Solo</label><br />
      <input
        type="radio"
        id="Mandalorian"
        value="Mandalorian"
        name="characters"
      />
      <label for="Mandalorian">Mandalorian</label><br />
      <input
        type="radio"
        id="LandoCalrissian"
        value="LandoCalrissian"
        name="characters"
      />
      <label for="LandoCalrissian">Lando Calrissian</label><br />

      <p>Select sauces:</p>
      <input type="checkbox" id="Mayo" name="sauces" value="Mayo" />
      <label for="Mayo">Mayo</label><br />
      <input type="checkbox" id="Mint-Mayo" name="sauces" value="Mint-Mayo" />
      <label for="Mint-Mayo">Mint-Mayo</label><br />
      <input
        type="checkbox"
        id="Tandoori-Mayo"
        name="sauces"
        value="Tandoori-Mayo"
      />
      <label for="Tandoori-Mayo">Tandoori-MayoT</label><br />
      <input
        type="checkbox"
        id="Barbecue"
        name="sauces"
        value="Barbecue"
        checked
      />
      <label for="Barbecue">Barbecue</label><br />
      <input type="checkbox" id="Southwest" name="sauces" value="Southwest" />
      <label for="Southwest">Southwest</label><br />
      <input
        type="checkbox"
        id="Sweet-Onion"
        name="sauces"
        value="Sweet-Onion"
      />
      <label for="Sweet-Onion">Sweet-Onion</label><br />
      <input type="checkbox" id="Mustard" name="sauces" value="Mustard" />
      <label for="Mustard">Mustard</label><br />
      <input type="checkbox" id="Harissa" name="sauces" value="Harissa" />
      <label for="Harissa">Harissa</label><br />

      <input
        type="file"
        style="display: none"
        id="file_upload"
        name="file_upload"
      />
      <label for="file_upload" id="file_upload_button">Upload file here</label>
    </form>

    <script>
      function validate() {
        //empty object
        let details = {};
        const email = document.forms["form1"]["email"].value;
        const mobileNumber = document.forms["form1"]["mobile_number"].value;
        const password = document.forms["form1"]["password"].value;

        //Check if all fields are present
        if (!email || !mobileNumber || !password) {
          alert("All fields are required");
        } else {
          //Checking email validity
          let emailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
          if (emailRegex.test(email)) {
            details.email = email;
          } else {
            alert("Invalid email");
          }

          //Checking number validity
          let validMobNum = true;
          mobileNumberRegex = /^[0-9]{10}$/;
          if (mobileNumber.length == 10) {
            for (digit of mobileNumber) {
              if (digit.charCodeAt(0) < 48 || digit.charCodeAt(0) > 57) {
                alert("Invalid number");
                vaildMobNum = false;
                break;
              }
            }

            //Store in details object if number is valid
            if (validMobNum) {
              details.mobileNumber = mobileNumber;
            }
          } else {
            alert("Invalid mobile number length");
          }

          //Checking password validity
          const passwordRegex =
            /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/;
          if (passwordRegex.test(password)) {
            details.password = password;
          } else {
            alert("Invalid Password");
          }
        }

        Select Validation
        console.log(details);
        const car = document.forms["form1"]["sports_cars"].value;
        if (car == "none") {
          details.car = car;
          alert("Please select a car");
        } else {
          console.log(car);
        }

        Radio buttons
        const character = document.forms["form1"]["characters"].value;
        details.character = character;
        console.log(character);

        CHeckbox validation
        const checkboxes = document.querySelectorAll(
          "input[name='sauces']:checked"
        );
        let selectedSauces = [];
        checkboxes.forEach((checkbox) => {
          selectedSauces.push(checkbox.value);
        });

        if (selectedSauces.length < 4) {
          alert("Select atleast 4 sauces");
        }

        const fileInput = document.getElementById("file_upload_button");
        fileInput.addEventListener("change", func1(), false);
        function func1() {
          console.log(this.files);
        }

        return false;
      }
    </script>
  </body>
</html>
